# =====================================================================
# Dockerfile.airflow — AgoMarket Airflow
# =====================================================================

FROM apache/airflow:2.9.0-python3.12

# ---------------------------------------------------------------------
# 1. Installation des dépendances supplémentaires (si besoin)
# ---------------------------------------------------------------------
USER root
RUN apt-get update && \
    apt-get install -y curl && \
    rm -rf /var/lib/apt/lists/*

# ---------------------------------------------------------------------
# 2. Retour à l’utilisateur airflow
# ---------------------------------------------------------------------
USER airflow

# ---------------------------------------------------------------------
# 3. Copie des DAGs, plugins, etc. (si nécessaire)
# ---------------------------------------------------------------------
# COPY dags/ /opt/airflow/dags/
# COPY plugins/ /opt/airflow/plugins/

# ---------------------------------------------------------------------
# 4. Commande de démarrage (gérée par docker-compose)
# ---------------------------------------------------------------------
# Rien à mettre ici : Airflow utilise ENTRYPOINT de l’image officielle